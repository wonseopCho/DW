{% extends "base.html" %}
{% load static %}

{% block headAddon %}
<link rel="stylesheet" type="text/css" href="{% static 'css/home.css' %}" />
<link rel="stylesheet" href="{% static 'owlcarousel/OwlCarousel2-2.3.2/dist/assets/owl.carousel.min.css' %}">
<link rel="stylesheet" href="{% static 'owlcarousel/OwlCarousel2-2.3.2/dist/assets/owl.theme.default.min.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'slick/1.8.0/slick/slick.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'slick/1.8.0/slick/slick-theme.css' %}"/>

<style>
/*body {
  overflow: hidden;
}*/
* {box-sizing: border-box;}
.wrapper {
  max-width: 940px;
  margin: 0 auto;
  border: 1px solid red;
}

.wrapper > div {
  border: 2px solid rgb(233,171,88);
  border-radius: 5px;
  background-color: rgba(233,171,88,.5);
  padding: 1em;
  color: #d9480f;
}.wrapper {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-gap: 10px;
  grid-auto-rows: minmax(100px, auto);
}
.one {
  grid-column: 1 / 2;
  grid-row: 1;
}
.two { 
  grid-column: 2 / 4;
  grid-row: 1 / 3;
}
.three {
  grid-column: 1;
  grid-row: 2 / 5;
}
.four {
  grid-column: 3;
  grid-row: 3;
}
.five {
  grid-column: 2;
  grid-row: 4;
}
.six {
  grid-column: 3;
  grid-row: 4;
}
.seven {
  grid-column: 2;
  grid-row: 3;
}

div.tips {
  background-color: #ddffff!important;
  border: 0px solid red;
  padding: 7px;
  width: 100%;
  margin: 0 auto;
  text-align: center;
 }

div.listicle {
  background-color: #ddffff!important;
  border: 0px solid red;
  padding: 7px;
  width: 100%;
  margin: 0 auto;
  text-align: center;
 }

 div.tips_box {
  background-color: white;
  border: 0px solid red;
  padding: 20px;
  width: 100%;
  height: 300px;
  margin: 0 auto;
 }

 div.listicle_box {
  background-color: white;
  border: 0px solid red;
  padding: 20px;
  width: 100%;
  height: 300px;
  margin: 0 auto;
 }

.circle_outter{
  width: 50%;
  border: 0px solid red; 
  display: table-cell;
  vertical-align: middle; 
  text-align: center; 
  padding: 0px 0; 
}

.circle_item {
  height: 100px;
  width: 100px;
  background-color: #bbb;
  border-radius: 50%;
  display: inline-block;
  margin: 0 auto;
}

.circle_label {
  border: 0px solid red; 
  margin-top: -10px
}

.sticky {
  position:fixed;
  top: 47px;
  background-color:#4DC7A0; 
  z-index:99; 
  border: 0px solid red ;
  width:100% ;
  height:50px; 
  text-align: center;
  margin-top: 10px
}

 .slick-center {
  background-color: #ff9900;
  border-radius: .50rem;
  font-weight: bold;
}

.main_nav_item {
  border-radius: .50rem;
  border: 0px solid red ;
  height:50px; 
  padding-top: 10px;
  
}

</style>
{% endblock %}
{% block title %} 
  DUCKWHO
{% endblock %}

{% block content %}
<div /*class="container"*/ style="border: 0px solid blue; width:100%; height: 90%">
  
  <!-- 
  <div class="tips">
    <h4>Tips</h4>
  </div>
  <div class="tips_box">
    <div class="row" style="height:49%">
      <div class="circle_outter">
        <a href="{% url 'tips:subway' %}">
        <div class="circle_item">
        </div>
        <div class="circle_label">
          Subway
        </div>
        </a>
      </div>
      <div class="circle_outter">
        <a href="">
        <div class="circle_item">
        </div>
        <div class="circle_label">
          Taxi
        </div>
        </a>
      </div>
    </div> 
    <div class="row" style="height:49%">
      <div class="circle_outter">
        <a href="">
        <div class="circle_item">
        </div>
        <div class="circle_label">
          Bus
        </div>
        </a>
      </div>
      <div class="circle_outter">
        <a href="">
        <div class="circle_item">
        </div>
        <div class="circle_label">
          Life
        </div>
        </a>
      </div>
    </div>
  </div>
  <div class="listicle">
    <h4>Listicle</h4>
  </div>
  <div class="listicle_box">
    <div class="row" style="height:50%">
      <div class="circle_outter">
        <div class="circle_item">
        </div>
        <div class="circle_label">
          Food
        </div>
      </div>
      <div class="circle_outter">
        <div class="circle_item">
        </div>
        <div class="circle_label">
          Shooping
        </div>
      </div>
    </div> 
    <div class="row" style="height:50%">
      <div class="circle_outter">
        <div class="circle_item">
        </div>
        <div class="circle_label">
          Tour
        </div>
      </div>
      <div class="circle_outter">
        <div class="circle_item">
        </div>
        <div class="circle_label">
          Activity
        </div>
      </div>
    </div>
  </div> -->

  <!-- 
  <div  class="jumbotron p-3 p-md-5 text-white rounded bg-dark" style="margin-top: 10px; margin-bottom: 2px" >
    <a href="{% url 'tips:subway' %}">
    <div class="col-md-6 px-0">
      <h1 class="display-6 font-italic">Subway</h1>
      <p class="lead my-0"></p>
      <p class="lead mb-0"></p>
    </div>
    </a>
  </div>

  <div class="jumbotron p-3 p-md-5 text-white rounded bg-dark" style="margin-bottom: 2px">
    <div class="col-md-6 px-0">
      <h1 class="display-6 font-italic">Food</h1>
      <p class="lead my-0"></p>
      <p class="lead mb-0"></p>
    </div>
  </div>
  -->
  <!-- 
  <table class="table table-hover">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">First</th>
        <th scope="col">Last</th>
        <th scope="col">Handle</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th scope="row">1</th>
        <td>Mark</td>
        <td>Otto</td>
        <td>@mdo</td>
      </tr>
      <tr>
        <th scope="row">2</th>
        <td>Jacob</td>
        <td>Thornton</td>
        <td>@fat</td>
      </tr>
      <tr>
        <th scope="row">3</th>
        <td>Larry</td>
        <td>the Bird</td>
        <td>@twitter</td>
      </tr>
    </tbody>
  </table> 
  -->
  <!-- <div class="wrapper">
    <div class="one">One</div>
    <div class="two">Two</div>
    <div class="three">Three</div>
    <div class="four">Four</div>
    <div class="five">Five</div>
    <div class="six">Six</div>
    <div class="seven">seven</div>
  </div>
  <div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-light">
    <div class="col-md-5 p-lg-5 mx-auto my-5">
      <h1 class="display-4 font-weight-normal">Punny headline</h1>
      <p class="lead font-weight-normal">And an even wittier subheading to boot. Jumpstart your marketing efforts with this example based on Apple's marketing pages.</p>
      <a class="btn btn-outline-secondary" href="#">Coming soon</a>
    </div>
    <div class="product-device box-shadow d-none d-md-block"></div>
    <div class="product-device product-device-2 box-shadow d-none d-md-block"></div>
  </div>
  <div class="d-md-flex flex-md-equal w-100 my-md-3 pl-md-3">
    <div class="bg-dark mr-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center text-white overflow-hidden">
      <div class="my-3 py-3">
        <h2 class="display-5">Another headline</h2>
        <p class="lead">And an even wittier subheading.</p>
      </div>
      <div class="bg-light box-shadow mx-auto" style="width: 80%; height: 300px; border-radius: 21px 21px 0 0;"></div>
    </div>
    <div class="bg-light mr-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
      <div class="my-3 p-3">
        <h2 class="display-5">Another headline</h2>
        <p class="lead">And an even wittier subheading.</p>
      </div>
      <div class="bg-dark box-shadow mx-auto" style="width: 80%; height: 300px; border-radius: 21px 21px 0 0;"></div>
    </div>
  </div>

  <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
    Launch demo modal
  </button> -->

  <!-- Modal -->
  <!-- <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel">Modal title</h4>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>

  <div class="wrapper">
    <div class="one">One</div>
    <div class="two">Two</div>
    <div class="three">Three</div>
    <div class="four">Four</div>
    <div class="five">Five</div>
    <div class="six">Six</div>
    <div class="seven">seven</div>
  </div>
  <div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-light">
    <div class="col-md-5 p-lg-5 mx-auto my-5">
      <h1 class="display-4 font-weight-normal">Punny headline</h1>
      <p class="lead font-weight-normal">And an even wittier subheading to boot. Jumpstart your marketing efforts with this example based on Apple's marketing pages.</p>
      <a class="btn btn-outline-secondary" href="#">Coming soon</a>
    </div>
    <div class="product-device box-shadow d-none d-md-block"></div>
    <div class="product-device product-device-2 box-shadow d-none d-md-block"></div>
  </div>
  <div class="d-md-flex flex-md-equal w-100 my-md-3 pl-md-3">
    <div class="bg-dark mr-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center text-white overflow-hidden">
      <div class="my-3 py-3">
        <h2 class="display-5">Another headline</h2>
        <p class="lead">And an even wittier subheading.</p>
      </div>
      <div class="bg-light box-shadow mx-auto" style="width: 80%; height: 300px; border-radius: 21px 21px 0 0;"></div>
    </div>
    <div class="bg-light mr-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
      <div class="my-3 p-3">
        <h2 class="display-5">Another headline</h2>
        <p class="lead">And an even wittier subheading.</p>
      </div>
      <div class="bg-dark box-shadow mx-auto" style="width: 80%; height: 300px; border-radius: 21px 21px 0 0;"></div>
    </div>
  </div>

  <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
    Launch demo modal
  </button> -->

  <!-- Modal -->
  <!-- <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel">Modal title</h4>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div> -->
  <div style="border:0px solid red; background-color: grey; width:100%; height:200px">
    
  </div>
  <div id="main_nav" class="main_nav_slick nav" style="  background-color: #4DC7A0;
text-align: center;">
    <div class="main_nav_item">Subway</div>
    <div class="main_nav_item">Taxi</div>
    <div class="main_nav_item">Bus</div>
    <div class="main_nav_item">Life</div>
    <div class="main_nav_item">Food</div>
    <div class="main_nav_item">Shooping</div>
    <div class="main_nav_item"">Tour</div>
    <div class="main_nav_item">Activity</div>
  </div>
  <div class="container card" style="border: 0px solid red ;width:100% ;height:100%; text-align: center">
    <div class="body_div_slick" style="border: 0px solid red ;width:100% ;height:100%; text-align: center">
      <div class="subway" style="border: 0px solid red ; width:100%; height:100%">Subway
      {% for article_subway in subways %}
        <div class="card" style="border: 0px solid red; background-color: #ccccb3; width:100%; margin-top: 15px"> 
         <!-- card image slide  
         <div class="owl-carousel owl-theme" style="border: 0px solid red; background-color: #ccccb3; width:100%;height:100%; margin: 0 auto; margin-top: 15px">
            {% for images in article_subway.image_set.all %}
              <div style="border: 0px solid red; background-color: #4DC7A0; width:100%; height: 100%; float: left; ">
                <img style="width:100%; height:100%" src="{{images.thumnails.url}}"/>
              </div>
            {% endfor %}
          </div> -->
          <div style="border:0px solid red;margin-top:0px; width:100%; height: 230px; margin:0 auto">
            ■Subway - {{article_subway.title}}
            <img style="width:100%;height:200px" src="{{article_subway.image_set.first.thumnails.url}}"/>
          </div>
          <div style="border: 0px solid orange; background-color: #99ebff; width: 95%; height:100px; margin: 0 auto; margin-top: 10px;">
            <textarea readonly style='width:100%; height:100%; overflow: hidden'>{{article_subway.text}}</textarea>
          </div>
          <div style="margin-top:10px">
            <span class="badge badge-light">Views {{article_subway.views}}</span>
            <span id="{{article_subway.id}}" onclick="likesUpdate({{article_subway.id}})" class="badge badge-light" style="margin-left: 15%">Likes {{article_subway.likes.count}}</span>
            <span style="margin-left: 15%">shares</span>
            <span style="margin-left: 15%">carrier</span>
            <br>
          </div>
          <div style=" border: 0px solid orange; width: 100%; padding-top:10px ; margin: 0 auto; text-align: center">
            <a href="{% url 'tips:view_tip' pk=article_subway.id %}">
            <button type="button" class="btn btn-primary" style="float:left"> 글보기 </button>
            </a>
            <button type="button" class="btn btn-warning" style="float: right"> 담기 </button>
          </div>
        </div>
      {% endfor %}
      </div>
      <div class="taxi" style="border: 0px solid red ;height:100%">Taxi
        {% for article_taxi in taxis %}
         <div class="card" style="border: 0px solid red; background-color: #ccccb3; width:100%; margin-top: 15px"> 
         <!-- card image slide  
         <div class="owl-carousel owl-theme" style="border: 0px solid red; background-color: #ccccb3; width:100%;height:100%; margin: 0 auto; margin-top: 15px">
            {% for images in article_subway.image_set.all %}
              <div style="border: 0px solid red; background-color: #4DC7A0; width:100%; height: 100%; float: left; ">
                <img style="width:100%; height:100%" src="{{images.thumnails.url}}"/>
              </div>
            {% endfor %}
          </div> -->
          <div style="margin-top:0px">
            ■Subway - {{article_taxi.title}}
            <img style="width:100%; height:100%" src="{{article_taxi.image_set.first.thumnails.url}}"/>
          </div>
          <div style="border: 0px solid orange; background-color: #99ebff; width: 95%; height:100px; margin: 0 auto; margin-top: 10px;">
            <textarea readonly style='width:100%; height:100%; overflow: hidden'>{{article_taxi.text}}</textarea>
          </div>
          <div>
            <span >view</span>
            <span style="margin-left: 15%">likes</span>
            <span style="margin-left: 15%">share</span>
            <span style="margin-left: 15%">carrier</span>
            <br>
          </div>
          <div style=" border: 1px solid orange; width: 100%; margin: 0 auto; text-align: center">
            <a href="{% url 'tips:view_tip' pk=article_taxi.id %}">
            <button type="button" class="btn btn-primary" style="float:left"> 글보기 </button>
            </a>
            <button type="button" class="btn btn-warning" style="float: right"> 담기 </button>
          </div>
        </div>
      {% endfor %}
      </div>
      <div style="border: 0px solid red ;width:100%;height:100%">Bus</div>
      <div style="border: 0px solid red ;width:100%;height:100%">Life</div>
      <div style="border: 0px solid red ;width:100%;height:100%">Food</div>
      <div style="border: 0px solid red ;width:100%;height:100%">Shooping</div>
      <div style="border: 0px solid red ;width:100%;height:100%">Tour</div>
      <div style="border: 0px solid red ;width:100%;height:100%">Activity</div>
    </div>
  </div>
</div>
{% endblock %}

{% block additional_script %}
<script type="text/javascript" src="{% static 'slick/1.8.0/slick/slick.min.js' %}"></script>
<script>

$(document).ready(function(){
  $('.main_nav_slick').slick({
      arrows: false,
      dots: false,
      infinite: true,
      speed: 300,
      slidesToShow: 3,
      slidesToScroll: 3,
      adaptiveHeight: true,
      centerMode: true,
      focusOnSelect: true,
      asNavFor: '.body_div_slick'
    });
  $('.body_div_slick').slick({
    slidesToShow: 1,
    slidesToScroll: 1,
    lazyLoad: 'ondemand',
    arrows: false,
    infinite: true,
    fade: false,
    adaptiveHeight: true,
    touchThreshold: 2,
    fade: false,
    asNavFor: '.main_nav_slick'
  });
  $('.main_nav_slick').on('beforeChange', function(event, slick, currentSlide, nextSlide){
     // var offset = $('div.container').offset();
     if (window.pageYOffset >= sticky) {
      $('html,body').animate({scrollTop: 190}, 400);
     }
  });
});
</script>
<script src="{% static 'owlcarousel/OwlCarousel2-2.3.2/dist/owl.carousel.min.js' %}"></script>
<script>
$(document).ready(function(){
  $(".owl-carousel").owlCarousel({
    items: 3,
    margin: 22,
    merge:true,
    loop: true,
    nav: true,
    autoWidth: false,
    autoHeight: true,
    video:false,
    lazyLoad:true,
    center:false,
    responsiveClass:true,
    responsive:{
        0:{
            items:1,
            nav:true
        },
        600:{
            items:3,
            nav:false
        },
        1000:{
            items:5,
            nav:true,
            loop:false
        }
    }
  });
});



window.onscroll = function() {myFunction()};

var navbar = document.getElementById("main_nav");
var sticky = navbar.offsetTop;

function myFunction() {
  if (window.pageYOffset >= sticky) {
    navbar.classList.add("sticky")
  } else {
    navbar.classList.remove("sticky");
  }
}

$(function(){
    $.ajaxSetup({
        headers: { "X-CSRFToken": getCookie("csrftoken") }
    }); 
  });

  function getCookie(c_name)
  {
      if (document.cookie.length > 0)
      {
          c_start = document.cookie.indexOf(c_name + "=");
          if (c_start != -1)
          {
              c_start = c_start + c_name.length + 1;
              c_end = document.cookie.indexOf(";", c_start);
              if (c_end == -1) c_end = document.cookie.length;
              return unescape(document.cookie.substring(c_start,c_end));
          }
      }
      return "";
   };
   
function likesUpdate(pk){
    var updates={}
    updates.pk = parseInt(pk)
    $.ajax({
      url:"{% url 'tips:likesUpdate' %}",
      method:"post",
      data: updates,
      success: function(res){
        if (res == 'login_require') {
          alert(res);
        }
        else if (res == 'post_error') {
          
        }
        else {
        $('#'+pk).html(res);
        }
      }, error: function(error){
        console.log(error)
        console.log("error")
      }
    });
  }
</script>

{% csrf_token %}
<script>
function latlngUpdate(updates){
    $.ajax({
      url:"{% url 'mapAPI:latlngUpdates' %}",
      method:"post",
      data:updates,
      success: function(res){
        console.log(res);
      }
    });
  }
</script>
{% endblock %}

{% block footer	%}
<div style="border: 0px solid red; height: 10%">
	&copy Loen  2018
</div>
{% endblock %}
